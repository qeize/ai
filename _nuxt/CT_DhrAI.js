import{i as e,s as a}from"./5Uq_rKTr.js";import{f as t,a0 as o,q as n,r,N as s,y as i,h as p,I as l,s as d,at as u,u as c,O as m,Q as b,J as h,o as y,b as v,d as _,t as g,n as f,K as w}from"./DGIvrB3b.js";const O=window.setInterval,N={class:"container"},M=["disabled"],C={key:0,class:"success"},I={key:1,class:"error"},T=t({__name:"verify-email",setup(t){const T=o().$i18n.t,E=n(),W=r("idle"),A=s(),k=A.options.history.state.from,G=A.currentRoute.value.query,{locale:V}=i(),P="en"===V.value?"":V.value;let H=null;p((async()=>{H=O((async()=>{await l().currentUser.reload(),e(l().currentUser)||(d({eventName:"email_verified",properties:{source:k}}),Q())}),5e3),d({eventName:"email_verification_page",properties:{source:k,url:window.location.href}}),await a(k,G,P)})),u((()=>{clearInterval(H)}));const q=async()=>{W.value="loading",await a(k,G,P),alert(T("verifyEmailVerificationEmailSentAllert")),W.value="sent",setTimeout((()=>{W.value="idle"}),12e4)},S=c(),{user:j}=m(S);b(j,(a=>{a&&!e(a)&&(d({eventName:"email_verified",properties:{source:k}}),Q())}));const Q=()=>{G&&(G.session_id||G.subscription_id||G.payment_intent)&&"sapt"===G.flow?h({path:E("/chat"),query:{success:G.success,session_id:G.session_id,subscription_id:G.subscription_id,payment_intent_id:G.payment_intent,pv:G.pv,pid:G.pid,src:G.src,cid:G.cid,flow:G.flow}}):G&&"sbpt"===G.flow&&G.checkout?window.location.href=G.checkout:G&&"sbpt"===G.flow&&G.cs?h({path:E("/checkout"),params:{clientSecret:G.cs,subscription:G.sub,customer:G.cid},state:{price:G.pv,interval:G.intv,intervalCount:G.intvct,offersFreeTrial:G.oft,directTo:G.dt,productId:G.pid,source:G.src,flow:G.flow}}):!G||!G.onboardingInf&&!G.onboarding||"sapt"!==G.flow&&"sbpt"!==G.flow?"onboarding"===k?(d({eventName:"should_open_paywall",properties:{source:"InteractiveOnboarding"}}),h({path:E("/payment"),state:{source:"InteractiveOnboarding"}})):"onboardingInf"===k?(d({eventName:"should_open_paywall",properties:{source:"InformativeOnboarding"}}),h({path:E("/payment"),state:{source:"InformativeOnboarding"}})):"onboardingInf2"===k?(d({eventName:"should_open_paywall",properties:{source:"InformativeOnboarding2"}}),h({path:E("/payment"),state:{source:"InformativeOnboarding2"}})):"onboardingGpt4"===k?(d({eventName:"should_open_paywall",properties:{source:"Gpt4Onboarding"}}),h({path:E("/payment"),state:{source:"Gpt4Onboarding"}})):"onboardingGpt42"===k?(d({eventName:"should_open_paywall",properties:{source:"Gpt4Onboarding2"}}),h({path:E("/payment"),state:{source:"Gpt4Onboarding2"}})):"onboardingPdf"===k?(d({eventName:"should_open_paywall",properties:{source:"PdfChatOnboarding"}}),h({path:E("/payment"),state:{source:"PdfChatOnboarding"}})):"onboardingVisual"===k?(d({eventName:"should_open_paywall",properties:{source:"VisualChatOnboarding"}}),h({path:E("/payment"),state:{source:"VisualChatOnboarding"}})):"onboardingMultiModel"===k?(d({eventName:"should_open_paywall",properties:{source:"MultiModelOnboarding"}}),h({path:E("/payment"),state:{source:"MultiModelOnboarding"}})):"onboardingMarketing"===k?(d({eventName:"should_open_paywall",properties:{source:"MarketingOnboarding"}}),h({path:E("/payment"),state:{source:"MarketingOnboarding"}})):"wtaOnboardingInf"===k?(d({eventName:"should_open_paywall",properties:{source:"WebToAppInformativeOnboarding"}}),h({path:E("/payment"),state:{source:"WebToAppInformativeOnboarding"}})):"wtaOnboardingGpt4"===k?(d({eventName:"should_open_paywall",properties:{source:"WebToAppGpt4Onboarding"}}),h({path:E("/payment"),state:{source:"WebToAppGpt4Onboarding"}})):"wtaOnboardingPdf"===k?(d({eventName:"should_open_paywall",properties:{source:"WebToAppPdfChatOnboarding"}}),h({path:E("/payment"),state:{source:"WebToAppPdfChatOnboarding"}})):"wtaOnboardingVisual"===k?(d({eventName:"should_open_paywall",properties:{source:"WebToAppVisualChatOnboarding"}}),h({path:E("/payment"),state:{source:"WebToAppVisualChatOnboarding"}})):"wtaOnboardingMultiModel"===k?(d({eventName:"should_open_paywall",properties:{source:"WebToAppMultiModelOnboarding"}}),h({path:E("/payment"),state:{source:"WebToAppMultiModelOnboarding"}})):"emailCampaign"===k?(d({eventName:"should_open_paywall",properties:{source:"EmailCampaign"}}),h({path:E("/payment"),state:{source:"EmailCampaign"}})):"whatsapp"===k?h({path:E("/phone"),state:{showPaywall:!0}}):"onboardingChatMobile"===k?(d({eventName:"should_open_paywall",properties:{source:"ChatOnboarding"}}),h({path:E("/payment"),state:{source:"ChatOnboarding"}})):"onboardingChatDesktop"===k?(d({eventName:"should_open_paywall",properties:{source:"ChatOnboarding"}}),h({path:E("/chat"),query:{paywall:!0},state:{source:"ChatOnboarding"}})):"Home"===k?(d({eventName:"should_open_paywall",properties:{source:"Home"}}),h({path:E("/payment"),state:{source:"Home"}})):k.startsWith("Home_")&&"Home_Middle"!==k?(d({eventName:"should_open_paywall",properties:{source:k}}),h({path:E("/payment"),state:{source:k}})):h("Home_Middle"===k?{path:E("/chat")}:{path:E("/payment"),state:{source:"default"}}):h(E("/chat"))};return(e,a)=>(y(),v("div",N,[_("h1",null,g(f(T)("verifyEmailverifyYourEMail")),1),_("p",null,g(f(T)("verifyEmailNotVerified")),1),_("p",null,g(f(T)("verifyEmailWait")),1),_("p",null,[_("button",{class:"btn btn-send",onClick:q,disabled:"idle"!=f(W)},g(f(T)("verifyEmailSendMe")),9,M)]),"sent"==f(W)?(y(),v("p",C,g(f(T)("verifyEmailSent")),1)):w("",!0),"error"==f(W)?(y(),v("p",I,g(f(T)("verifyEmailError")),1)):w("",!0)]))}},[["__scopeId","data-v-85896efc"]]);export{T as default};
