import{_ as e}from"./BznygBlJ.js";import{z as t}from"./DnjKlDmc.js";import{_ as s}from"./BH3tiVhi.js";import{a}from"./CfUKz5g-.js";import l from"./CvW_hQvu.js";import{T as n,L as i,S as r}from"./CMWhIOe7.js";import{a as o,b as c,p as u}from"./Ch1Pc0BU.js";import{f as p,q as d,g as m,N as v,u as g,x as h,z as y,r as b,Q as f,s as w,$ as _,h as k,o as S,b as C,d as P,a as N,n as x,F as A,E as M,c as D,D as T,t as I,K as j,J as E,w as $,T as U,S as W,a0 as q,a3 as V,a4 as z,a5 as O,V as B,G as R,a6 as F,p as L,B as H,W as G,a7 as Q,I as J,a8 as Y,a9 as K,aa as Z,ab as X,ac as ee,H as te,j as se,Z as ae,a1 as le}from"./DGIvrB3b.js";import{A as ne,a as ie}from"./CVLyu9no.js";import re from"./3FHnAJsi.js";import oe from"./DCTNADyq.js";import ce from"./BTwSaFOe.js";import{E as ue}from"./DcpZDYJl.js";import{C as pe}from"./BHGgik2c.js";import{c as de}from"./B6HRShK2.js";import"./N2209nNV.js";import"./BRAV77n6.js";import"./B2Jml5v-.js";import"./BsztFrPN.js";import"./yfSRXwZd.js";import"./Cd6WIQZy.js";import"./t2T22otC.js";import"./DHXfgSxK.js";const me={class:"advantages-table-container"},ve={key:0},ge={class:"products"},he={class:"subtexts mt-20"},ye={class:"privacy-terms"},be={href:"/policies/privacy-en.html",target:"_blank",class:"legal-link"},fe={href:"/policies/terms-conditions-en.html",target:"_blank",class:"legal-link"},we={key:0,class:"faint"},_e={class:"pay-secure-text mt-20"},ke={class:"pt-14 semi-bold"},Se={class:"providers"},Ce=["src"],Pe={href:"/policies/refund-en.html",target:"_blank",class:"refund-policy pt-16 bold mt-12"},Ne={key:1,class:"spinner-container"},xe=p({__name:"SettingsPaywall",props:["isFullPage"],setup(e){const t=d(),s=m();v();const p=g(),$=h(),U=y((()=>"light"===$.preference)),W=b("idle"),q=y((()=>JSON.parse(p.getParameter("multi_language_model_config")||"{}"))),V=y((()=>"light")),z=y((()=>q.value.is_active?o:c)),O=y((()=>JSON.parse(p.getParameter("paywall_structure")||"{}"))),B=y((()=>p.getParameter("pricing_tier"))),R=y((()=>{var e;return parseInt(null==(e=O.value.Settings)?void 0:e.discount)/100||.33})),F=y((()=>{var e;return parseInt(null==(e=O.value.Settings)?void 0:e.most_popular)})),L=y((()=>{var e,t,s;return[null==(e=O.value.Settings)?void 0:e.save_badge_1,null==(t=O.value.Settings)?void 0:t.save_badge_2,null==(s=O.value.Settings)?void 0:s.save_badge_3]})),H=b(0),G=b([]),Q=y((()=>p.productsObj??JSON.parse(localStorage.getItem("dpp"))??{})),J=y((()=>{var e;return null==(e=O.value.Settings)?void 0:e.free_product_text})),Y=y((()=>{var e;return parseInt(null==(e=O.value.Settings)?void 0:e.save_money)})),K=y((()=>{var e;return null==(e=O.value.Settings)?void 0:e.save_money_percantage})),Z=y((()=>{var e;return null==(e=O.value.Settings)?void 0:e.per_badge})),X=y((()=>{var e;return null==(e=O.value.Settings)?void 0:e.per_day_layout})),ee=y((()=>{var e;return null==(e=O.value.Settings)?void 0:e.duration_format}));let te;const se=f(O,(async()=>{var e;(null==(e=O.value.Settings)?void 0:e.products)&&(w({eventName:"paywall_structure_loaded",properties:{duration:Date.now()-te}}),ae())})),ae=async()=>{H.value=parseInt(O.value.Settings.selected_index),O.value.Settings.products.every((e=>`${e}_${B.value}`in Q.value))?G.value=O.value.Settings.products.map((e=>Q.value[`${e}_${B.value}`])):G.value=await _(!1,O.value.Settings.products,B.value),G.value&&w({eventName:"paywall_products_loaded",properties:{duration:Date.now()-te}})};k((()=>{var e;(null==(e=O.value.Settings)?void 0:e.products)&&(w({eventName:"paywall_structure_loaded",properties:{duration:Date.now()-te}}),ae()),setTimeout((async()=>{G.value&&0!==G.value.length||(se(),H.value=2,O.value.Settings={most_popular:1,save_badge_2:"33%",save_badge_3:"75%"},["1month","3month","1year"].every((e=>`${e}_t8`in Q.value))?G.value=["1month","3month","1year"].map((e=>Q.value[`${e}_t8`])):G.value=await _(!1,["1month","3month","1year"],"t8"),G.value=await _(!1,["1month","3month","1year"],"t8"),w({eventName:"paywall_products_failed_to_load",properties:{source:"Settings"}}))}),1e4),w({eventName:"paywall",properties:{source:"Settings"}})}));return(e,o)=>{const c=a,d=l;return S(),C(A,null,[P("div",me,[N(c,{advantages:x(z),style:{width:"100%"},settings:!0,theme:x(U)},null,8,["advantages","theme"])]),x(G)&&x(G).length>0?(S(),C("div",ve,[P("div",ge,[(S(!0),C(A,null,M(x(G),((e,t)=>(S(),D(T("light"!==x(V)&&"light"!==x($).preference?n:i),{product:e,perBadge:x(Z),isSelected:x(H)===t,discount:x(R),mostPopular:t===x(F),saveBadge:x(L)[t],durationFormat:x(ee),saveMoney:t===x(Y),saveMoneyPercantage:x(K),onPopup:!0,settings:!x(U),perDayLayout:x(X),opp:1===x(G).length,clickHandler:()=>{H.value=t}},null,40,["product","perBadge","isSelected","discount","mostPopular","saveBadge","durationFormat","saveMoney","saveMoneyPercantage","settings","perDayLayout","opp","clickHandler"])))),256))]),P("button",{class:"mt-40 btn btn-success pt-18 bold",style:{background:"#0EA982",height:"60px"},onClick:o[0]||(o[0]=e=>(async e=>{var a;"idle"===W.value&&(W.value="initiating",w({eventName:"purchase_clicked",properties:{productId:e.id,source:"Settings",paddleCustomerId:null==(a=p.userData)?void 0:a.paddleCustomerId}}),window.innerWidth>700?E({path:t(s.path),query:{checkout:!0,cs:"paddle",...s.query},params:{clientSecret:"paddle"},state:{price:e.unit_amount,interval:e.recurring&&e.recurring.interval,intervalCount:e.recurring&&e.recurring.interval_count,offersFreeTrial:e.offersFreeTrial,productId:e.id,currency:e.currency,source:"Settings",freeTrialDayCount:e.recurring.trial_period_days}}):E({path:t("/checkout/paddle"),state:{price:e.unit_amount,interval:e.recurring&&e.recurring.interval,intervalCount:e.recurring&&e.recurring.interval_count,offersFreeTrial:e.offersFreeTrial,productId:e.id,currency:e.currency,source:"Settings",freeTrialDayCount:e.recurring.trial_period_days}}),W.value="idle")})(x(G)[x(H)]))},I(x(G)[x(H)]&&x(G)[x(H)].offersFreeTrial?x(J)??e.$t("paywallTryFree"):e.$t("paywallUpgradePlan")),1),P("div",he,[P("div",ye,[P("a",be,I(e.$t("paywallPrivacy")),1),o[1]||(o[1]=P("p",null,"I",-1)),P("a",fe,I(e.$t("paywallTerms")),1)]),x(G)[x(H)]&&"recurring"===x(G)[x(H)].type?(S(),C("p",we,I(e.$t("paywallCancelAnytime")),1)):j("",!0)]),P("div",_e,[N(x(r),{class:"shield-icon"}),P("span",ke,I(e.$t("paywallPaySafeSecure")),1)]),P("div",Se,[(S(!0),C(A,null,M(x(u),(e=>(S(),C("img",{src:e,class:"provider-svg",alt:"payment provider"},null,8,Ce)))),256))]),P("a",Pe,I(e.$t("refundPolicy")),1)])):(S(),C("div",Ne,[N(d)]))],64)}}},[["__scopeId","data-v-2f117150"]]),Ae=["onClick"],Me={class:"question"},De={class:"semi-bold"},Te={key:0,class:"answer semi-bold"},Ie=p({__name:"FAQ",props:["settings"],setup(e){const t=b(null),s=[{question:"faqCancelSubscriptionQuestion",answer:"faqCancelSubscriptionAnswer"},{question:"faqUseSubscriptionQuestion",answer:"faqUseSubscriptionAnswer"},{question:"faqRequestRefundQuestion",answer:"faqRequestRefundAnswer"}];return(a,l)=>(S(),C(A,null,M(s,((l,n)=>P("div",{class:W([{settings:e.settings},"qa-container"]),onClick:e=>(e=>{t.value===e?t.value=null:(t.value=e,w({eventName:"faq_question_open",properties:{source:"Settings",question:s[e].question}}))})(n)},[P("div",Me,[P("h2",De,I(a.$t(l.question)),1),x(t)===n?(S(),D(x(ne),{key:0,class:"arrow"})):(S(),D(x(ie),{key:1,class:"arrow"}))]),N(U,{name:"slide"},{default:$((()=>[x(t)===n?(S(),C("div",Te,[P("p",null,I(a.$t(l.answer)),1)])):j("",!0)])),_:2},1024)],10,Ae))),64))}},[["__scopeId","data-v-142b7b31"]]),je={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 21"};const Ee={render:function(e,t){return S(),C("svg",je,t[0]||(t[0]=[P("path",{fill:"#fff","fill-rule":"evenodd",d:"M10.004 3.099c-1.04 0-2.03.21-2.93.592l-2.9-.806a.903.903 0 0 0-1.13 1.037L3.57 6.72a7.527 7.527 0 1 0 12.87 0l.524-2.798a.903.903 0 0 0-1.13-1.037l-2.899.806a7.5 7.5 0 0 0-2.93-.592m-2.713 8.426a2.107 2.107 0 1 0 0-4.215 2.107 2.107 0 0 0 0 4.215m7.527-2.108a2.107 2.107 0 1 1-4.214 0 2.107 2.107 0 0 1 4.214 0M9.85 11.495l-1.007.805a.245.245 0 0 0-.035.348l1.007 1.209a.245.245 0 0 0 .376 0l1.007-1.209a.245.245 0 0 0-.035-.348l-1.007-.805a.244.244 0 0 0-.306 0","clip-rule":"evenodd"},null,-1),P("circle",{cx:"7.366",cy:"9.502",r:".978",fill:"#fff"},null,-1),P("circle",{cx:"12.633",cy:"9.502",r:".978",fill:"#fff"},null,-1)]))}},$e={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 21"};const Ue={render:function(e,t){return S(),C("svg",$e,t[0]||(t[0]=[P("path",{fill:"#fff",d:"M9.19 18.738a1.47 1.47 0 0 0 1.627 0c1.368-.898 4.093-2.854 5.244-4.873 1.295-2.27 1.418-6.054 1.389-7.942-.01-.689-.483-1.27-1.141-1.473-.853-.264-2.039-.65-2.94-1.017-.693-.283-1.594-.737-2.29-1.102a2.32 2.32 0 0 0-2.151 0c-.696.365-1.597.82-2.29 1.102-.901.367-2.087.753-2.94 1.017-.658.203-1.13.784-1.14 1.473-.03 1.888.093 5.673 1.388 7.942 1.151 2.019 3.876 3.975 5.245 4.873"},null,-1),P("path",{stroke:"#212123","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.641",d:"m7.648 9.823 1.683 1.683 3.029-3.365"},null,-1)]))}},We={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 21"};const qe={render:function(e,t){return S(),C("svg",We,t[0]||(t[0]=[P("rect",{width:"15",height:"17.727",x:"2.5",y:"1.633",fill:"#fff",rx:"2.77"},null,-1),P("path",{stroke:"#212123","stroke-linecap":"round","stroke-width":"1.667",d:"M7.956 7.094h4.091M7.272 10.5h5.455M7.956 13.906h4.091"},null,-1)]))}},Ve={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 21"};const ze={render:function(e,t){return S(),C("svg",Ve,t[0]||(t[0]=[P("path",{fill:"#fff","fill-rule":"evenodd",d:"M3.333 3.83A1.66 1.66 0 0 1 5 2.165h6.149c.331 0 .649.132.884.366L16.3 6.798c.235.234.366.552.366.884v9.482A1.667 1.667 0 0 1 15 18.831H5a1.667 1.667 0 0 1-1.667-1.667zm11.279 4.167a.333.333 0 0 0 .235-.569l-3.445-3.445a.333.333 0 0 0-.569.236v3.445c0 .184.15.333.333.333z","clip-rule":"evenodd"},null,-1)]))}},Oe={xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 24 24"};const Be={render:function(e,t){return S(),C("svg",Oe,t[0]||(t[0]=[P("path",{"fill-opacity":".2",d:"M9.75 12a2.25 2.25 0 1 1 4.5 0 2.25 2.25 0 0 1-4.5 0"},null,-1),P("path",{"fill-opacity":".2","fill-rule":"evenodd",d:"M2 12c0 1.64.425 2.191 1.275 3.296C4.972 17.5 7.818 20 12 20s7.028-2.5 8.725-4.704C21.575 14.192 22 13.639 22 12c0-1.64-.425-2.191-1.275-3.296C19.028 6.5 16.182 4 12 4S4.972 6.5 3.275 8.704C2.425 9.81 2 10.361 2 12m10-3.75a3.75 3.75 0 1 0 0 7.5 3.75 3.75 0 0 0 0-7.5","clip-rule":"evenodd"},null,-1)]))}},Re={xmlns:"http://www.w3.org/2000/svg",fill:"#fff",viewBox:"0 0 24 24"};const Fe={render:function(e,t){return S(),C("svg",Re,t[0]||(t[0]=[P("path",{"fill-opacity":".2",d:"M2.69 6.705a.75.75 0 1 0-1.38.59zm6.351 7.033a.75.75 0 1 0-1.257-.818zm-2.67 1.353a.75.75 0 0 0 1.258.818zm16.32-7.796a.75.75 0 0 0-1.379-.59zm-2.72 5.865a.75.75 0 1 0 1.06-1.06zm-8.72 3.34a.75.75 0 1 0 1.5 0zm5.12-.591a.75.75 0 1 0 1.258-.818zm-10.84-4.25a.75.75 0 0 0-1.06-1.06zm-2.56.44a.75.75 0 0 0 1.06 1.06zm9.03 1.15c-3.225 0-5.54-1.604-7.076-3.26a13.6 13.6 0 0 1-1.702-2.28 12 12 0 0 1-.529-.994l-.004-.01v-.001L2 7q-.345.145-.69.295h.001l.001.004.003.006.04.088q.265.555.58 1.084c.41.69 1.034 1.61 1.89 2.533 1.715 1.845 4.4 3.74 8.175 3.74zm3.312-.618A8.9 8.9 0 0 1 12 13.25v1.5c1.438 0 2.725-.276 3.862-.723zm-7.529.289-1.413 2.17 1.258.818 1.412-2.17-1.257-.82zM22 7l-.69-.296h.001v.002l-.007.013a8 8 0 0 1-.15.313 13.3 13.3 0 0 1-2.667 3.55l1.026 1.094a14.8 14.8 0 0 0 3.122-4.26l.04-.085.01-.024.003-.007v-.003l.001-.001zm-3.513 3.582c-.86.806-1.913 1.552-3.174 2.049l.55 1.396c1.472-.58 2.684-1.444 3.65-2.351zm-.017 1.077 1.5 1.5 1.06-1.06-1.5-1.5zm-7.22 2.34v2.5h1.5V14zm3.71-.261 1.411 2.17 1.258-.817-1.413-2.171zm-10.49-3.14-1.5 1.5 1.06 1.06 1.5-1.498-1.06-1.06z"},null,-1)]))}},Le={xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 20 20"};const He={render:function(e,t){return S(),C("svg",Le,t[0]||(t[0]=[P("g",{stroke:"#0EA982","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.667"},[P("path",{d:"M9.167 3.336H3.334a1.667 1.667 0 0 0-1.667 1.667v11.666a1.667 1.667 0 0 0 1.667 1.667H15a1.667 1.667 0 0 0 1.667-1.667v-5.833"}),P("path",{d:"M15.417 2.08a1.768 1.768 0 0 1 2.5 2.5L10 12.497l-3.333.833.833-3.333z"})],-1)]))}},Ge={class:"settings"},Qe={class:"container"},Je={class:"pt-32 bold mt-20"},Ye={class:"content"},Ke={class:"left-content"},Ze={class:"utility-box"},Xe={class:"pt-28 bold"},et={class:"pt-20 semi-bold"},tt={class:"pt-20 regular op-60 mt-10"},st={class:"pt-20 semi-bold"},at={class:"mt-10",style:{display:"flex","flex-direction":"row","justify-content":"space-between"}},lt={key:0,class:"pt-16 medium mt-8 success-message"},nt={class:"account-actions"},it={class:"delete-account"},rt={class:"pt-14 regular op-40"},ot={class:"utility-box"},ct={class:"pt-28 bold"},ut={class:"wp-status"},pt={class:"wp"},dt={class:"pt-20 semi-bold"},mt={class:"connect-wp"},vt={key:0},gt={class:"pt-20 semi-bold"},ht={key:0},yt={class:"pt-16 semi-bold op-50 mt-24"},bt={key:1,class:"p-relative tel-input",style:{width:"330px"}},ft={key:1,style:{position:"relative"}},wt={class:"pt-16 semi-bold op-50 mt-24 spc"},_t={class:"pt-16 semi-bold op-50 mt-12"},kt=["href"],St={class:"pt-16 semi-bold op-50 mt-24"},Ct={class:"pt-16 semi-bold op-50 mt-24"},Pt={class:"pt-16 semi-bold underline",style:{color:"#0EA982"}},Nt={key:1},xt={class:"pt-20 semi-bold"},At={class:"pt-16 semi-bold op-50 mt-24"},Mt={class:"pt-16 semi-bold underline",style:{color:"#0EA982"}},Dt={key:0,class:"utility-box"},Tt={class:"pt-28 bold"},It={class:"pt-16 semi-bold op-50"},jt={class:"pt-16 semi-bold op-50"},Et={class:"links mt-24"},$t={key:1,class:"utility-box"},Ut={class:"pt-28 bold"},Wt={class:"pt-16 semi-bold op-50"},qt=["href"],Vt={class:"right-content"},zt={class:"utility-box"},Ot={class:"pt-28 bold"},Bt={key:0,style:{height:"100%",display:"flex","flex-direction":"column"}},Rt={key:1},Ft={class:"plan-box"},Lt={class:"pt-28 bold"},Ht={class:"pt-16 semi-bold mt-12",style:{color:"#0EA982",display:"flex","align-items":"center","justify-content":"space-between"}},Gt=["disabled"],Qt=["disabled"],Jt=["disabled"],Yt={key:1,class:"pt-16 medium op-50 mt-24"},Kt={key:0},Zt={key:1},Xt=["disabled"],es={class:"pt-12 regular op-40 mt-25 mb-32"},ts={key:0,class:"utility-box"},ss={class:"pt-28 bold"},as={class:"pt-16 semi-bold op-50"},ls=["href"],ns={key:1,class:"utility-box"},is={class:"pt-28 bold"},rs={class:"pt-16 semi-bold op-50"},os={class:"pt-16 semi-bold op-50"},cs={class:"links mt-24"},us={class:"faq"},ps={class:"utility-box"},ds={style:{padding:"50px","max-width":"480px"}},ms={class:"pt-28 bold center-text"},vs={class:"mt-20"},gs={class:"pt-18 regular"},hs={key:0,class:"pt-14 medium mt-8 error-message"},ys={class:"p-relative"},bs=["type","placeholder"],fs={class:"eyeButton"},ws={class:"mt-20"},_s={class:"pt-18 regular"},ks={key:0,class:"pt-14 medium mt-8 error-message"},Ss={class:"p-relative"},Cs=["type","placeholder"],Ps={class:"eyeButton"},Ns={class:"pt-18 regulart mt-20"},xs={class:"p-relative"},As=["type","placeholder"],Ms={class:"eyeButton"},Ds={class:"change-password-buttons mt-20"},Ts=["disabled"],Is={class:"delete-modal"},js={class:"pt-38 bold"},Es={class:"pt-16 regular op-50 mt-16"},$s={key:0,class:"p-relative"},Us=["type","placeholder"],Ws={key:1,class:"pt-14 medium mt-8 error-message"},qs={class:"buttons mt-24"},Vs=["disabled"],zs=p({__name:"settings",setup(a){const l=d(),n=q().$i18n.t,i=m();v();const r=g(),o=new V;o.setCustomParameters({prompt:"select_account"});const c={"google.com":{provider:o},"facebook.com":{provider:new z},"apple.com":{provider:new O("apple.com")}},u=b("idle"),p=y((()=>"true"===r.getParameter("retain_cancellation_flow_on"))),h=y((()=>r.user.uid)),f=y((()=>r.isUserPro())),_=y((()=>r.userData&&r.userData.subscription)),k=y((()=>r.userData&&r.userData.providerData[0].providerId)),M=y((()=>r.userData&&r.userData.email)),T=y((()=>r.userData&&r.userData.userId)),U=y((()=>r.userData&&r.userData.phoneNumber)),ne=y((()=>r.userData&&r.userData.unverifiedPhoneNumber)),ie=b(!1),me=b(!1),ve=b(!1),ge=y((()=>!!i.query.checkout)),he=b(""),ye=b(""),be=b(""),fe=b(""),we=b(""),_e=b(""),ke=b(""),Se=y((()=>!ye.value||!be.value||!fe.value)),Ce=y((()=>!he.value&&"password"===k.value)),Pe=b(""),Ne=b(!1),Ae=b(null),Me=b(!1),De=b(!1),Te=y((()=>"16317693074")),je=y((()=>$e.value?"text":"password")),$e=b(!1);let We=null;const Ve=()=>{$e.value=!$e.value,$e.value&&(null!==We&&clearTimeout(We),We=setTimeout((()=>{$e.value=!1,We=null}),8e3))},Oe=e=>{ie.value=e,e||(we.value="",_e.value="",ye.value="",be.value="",fe.value=""),e&&w({eventName:"change_password_tapped",properties:{source:"Settings"}})},Re=e=>{me.value=e,e||(we.value="",he.value=""),e&&w({eventName:"delete_account_tapped",properties:{source:"Settings",signupMethod:k.value}})},Le=e=>{ve.value=!ve.value,e&&r.editUserData({unverifiedPhoneNumber:"",phoneNumber:""}),!e&&ve.value&&w({eventName:"connect_your_number_tapped",properties:{source:"Settings"}}),e&&ve.value&&w({eventName:"change_number_tapped",properties:{source:"Settings"}})},zs=()=>{if(!ye.value.trim())return we.value=n("settingsPasswordEmptyError"),void setTimeout((()=>{we.value=""}),5e3);const e=be.value.trim();if(!e)return _e.value=n("settingsPasswordEmptyError"),void setTimeout((()=>{_e.value=""}),5e3);if(be.value!=fe.value)return _e.value=n("settingsPasswordMatchError"),void setTimeout((()=>{_e.value=""}),5e3);if(e==ye.value.trim())return _e.value=n("settingsPasswordSameError"),void setTimeout((()=>{_e.value=""}),5e3);const t=J(),s=t.currentUser,a=Y.credential(t.currentUser.email,ye.value);K(s,a).then((()=>{Z(J().currentUser,e).then((()=>{ke.value=n("settingsPasswordChangeSuccess"),setTimeout((()=>{ke.value=""}),5e3),Oe(!1),w({eventName:"password_changed",properties:{source:"Settings"}})})).catch((e=>{"auth/weak-password"===e.code?_e.value=n("settingsPasswordLengthError"):_e.value=e.message||n("settingsTryAgain"),setTimeout((()=>{_e.value=""}),5e3)}))})).catch((e=>{console.log(e),we.value=n("settingsPasswordWrongError"),setTimeout((()=>{we.value=""}),5e3)}))},Os=async()=>{if(!he.value.trim()&&"password"===k.value)return we.value=n("settingsPasswordEmptyError"),void setTimeout((()=>{we.value=""}),5e3);if(_.value&&"web"===_.value.subscriptionPlatform&&"lifetime"!==_.value.interval&&_.value.isAutoRenewOn)if("paddle"===_.value.paymentProcessor)try{await Ys(_.value.subscriptionId)}catch(s){return console.log(s),alert(n("settingsSubscriptionCancelError").replace(/kk/g,"@"))}else try{await de(_.value.subscriptionId)}catch(s){return console.log(s),alert(n("settingsSubscriptionCancelError").replace(/kk/g,"@"))}const e=J(),t=e.currentUser;if("password"===k.value){const s=Y.credential(e.currentUser.email,he.value);K(t,s).then((()=>{Bs()})).catch((e=>{we.value=n("settingsPasswordWrongError"),setTimeout((()=>{we.value=""}),5e3)}))}else X(t,c[k.value].provider).then((()=>{Bs()})).catch((e=>{we.value=e.message||n("settingsTryAgain"),setTimeout((()=>{we.value=""}),5e3)}))},Bs=()=>{ee(J().currentUser).then((()=>{ke.value=n("settingsUserDeleteSuccess"),setTimeout((()=>{ke.value=""}),5e3),Re(!1),we.value="",w({eventName:"account_deleted",properties:{source:"Settings",signupMethod:k.value}}),E({path:l("/")})})).catch((e=>{we.value=e.message||n("settingsTryAgain"),setTimeout((()=>{we.value=""}),5e3)}))},Rs=()=>{w({eventName:"logged_out",properties:{source:"Settings"}}),te(J()).then((()=>{})),E({path:l("/")})},Fs=y((()=>U.value?n("settingsWhatsappConnected"):ne.value?n("settingsWhatsappPending"):n("settingsWhatsappNotConnected"))),Ls=y((()=>Fs.value==n("settingsWhatsappConnected")?"#0EA982":Fs.value==n("settingsWhatsappPending")?"#FFA500":"#EA4335")),Hs=e=>{Ne.value=e.valid,e.valid&&(Ae.value=e.number)},Gs=async()=>{Me.value||(Me.value=!0,w({eventName:"whatsapp_connect_start",properties:{source:"Settings"}}),await se({userId:h.value,unverifiedPhoneNumber:Ae.value}),r.editUserData({unverifiedPhoneNumber:Ae.value}),w({eventName:"number_connected",properties:{source:"Settings"}}),u.value="unverified-phone-saved",Me.value=!1,ve.value=!1)},Qs=async()=>{try{await navigator.clipboard.writeText(`/authenticate ${T.value}`),De.value=!0,setTimeout((()=>{De.value=!1}),3e3)}catch(e){console.log(e),alert(n("errorCouldNotCopyText"))}},Js=e=>{if("web"!==e.subscriptionPlatform)return n("settingsPurchasePlanPremium");const t=e.isFreeTrial,s=e.interval;return"lifetime"==s?n("settingsPurchasePlanLifetime"):`${n(`settingsPurchasePlan${ae(s)}ly`)}${t?` - ${n("settingsPurchasePlanFreeTrial")}`:""}`},Ys=async e=>{try{await le({path:"/paddle/cancel-subscription",method:"POST",data:{subscriptionId:e}});const t=r.userData;t.subscription.isAutoRenewOn=!1,r.editUserData(t)}catch(t){console.log(t),w({eventName:"cancel_subs_error",eventGroup:"subscription",properties:{}}),alert(n("settingsSubscriptionCancelError").replace(/kk/g,"@"))}},Ks=async e=>{try{await le({path:"/paddle/stop-cancellation",method:"POST",data:{subscriptionId:e}});const t=r.userData;t.subscription.isAutoRenewOn=!0,r.editUserData(t)}catch(t){console.log(t),w({eventName:"stop_cancellation_error",eventGroup:"subscription",properties:{}}),alert(n("settingsSubscriptionCancelError").replace(/kk/g,"@"))}},Zs=async e=>{if(!e&&"idle"==u.value){u.value="creatingPortal";const e=r.userData,s=()=>{alert(n("settingsCreatePortalError")),u.value="idle"};try{const t=await le({method:"POST",path:"/payment/create-portal-session",data:{customer:e.stripeCustomerId}});t.data&&t.data.success?window.location.href=t.data.payload.url:s()}catch(t){console.log(t),s()}}},Xs=()=>{E({path:l("/settings"),replace:!0})},ea=y((()=>r.isStripeCustomer())),ta=async()=>{await se({userId:h.value,migrationNoticeSeen:!0}),r.editUserData({migrationNoticeSeen:!0})};return(a,l)=>{const i=e,r=t,o=s,c=xe,d=Ie,m=re,v=oe,g=ce;return S(),C(A,null,[P("div",Ge,[N(i),P("div",Qe,[P("h1",Je,I(x(n)("settingsSettings")),1),P("div",Ye,[P("div",Ke,[P("div",Ze,[P("h2",Xe,I(x(n)("settingsProfile")),1),P("div",null,[P("p",et,I(x(n)("settingsEmail")),1),P("p",tt,I(x(M)),1)]),P("div",null,[P("p",st,I(x(n)("settingsPassword")),1),P("div",at,[l[30]||(l[30]=P("p",{class:"pt-20 regular op-60"}," ******************* ",-1)),"password"===x(k)?(S(),C("p",{key:0,class:"pt-18 semi-bold underline pointer",onClick:l[0]||(l[0]=e=>Oe(!0))},I(x(n)("settingsPasswordChange")),1)):j("",!0)]),x(ke)?(S(),C("p",lt,I(x(ke)),1)):j("",!0)]),l[31]||(l[31]=P("span",{class:"divider"},null,-1)),P("div",nt,[P("button",{class:"button-grey",onClick:Rs},I(x(n)("settingsLogOut")),1),P("div",it,[P("button",{class:"button-red",onClick:l[1]||(l[1]=e=>Re(!0))},I(x(n)("settingsDeleteAccount")),1),P("p",rt,I(x(n)("settingsDeleteAccountWarning")),1)])])]),P("div",ot,[P("h2",ct,I(x(n)("settingsWhatsapp")),1),P("div",ut,[P("div",pt,[l[32]||(l[32]=P("img",{class:"wp-icon",src:"https://storage.googleapis.com/chatapp-website-assets/new_whatsapp_icon.webp",alt:"whatsapp icon"},null,-1)),P("p",dt,I(x(n)("settingsWhatsappStatus")),1)]),P("p",{class:"pt-20 regular",style:B(`color: ${x(Ls)};`)},I(x(Fs)),5)]),l[33]||(l[33]=P("span",{class:"divider"},null,-1)),P("div",mt,[x(U)?(S(),C("div",Nt,[P("h3",xt,I(x(n)("settingsWhatsappConnectedNumber")),1),P("p",At,I(x(U)),1),P("div",{class:"mt-16 pointer",style:{display:"flex"},onClick:l[4]||(l[4]=e=>Le(!0))},[N(x(He),{width:"20",height:"20",class:"mr-8"}),P("p",Mt,I(x(n)("settingsWhatsappChange")),1)])])):(S(),C("div",vt,[P("h3",gt,I(x(n)("settingsWhatsappConnect")),1),x(ne)?(S(),C("div",ft,[P("p",wt,I(x(n)("settingsWhatsappPendingNumber"))+" "+I(x(ne)),1),P("p",_t,I(x(n)("settingsWhatsappCodeInfo")),1),P("a",{class:"btn btn-send-message mt-10",href:`https://wa.me/${x(Te)}?text=/authenticate%20${x(T)}%20%0APlease%20do%20not%20change%20this%20message%20and%20send%20it%20directly%20as%20is`},[P("p",null,I(x(n)("settingsWhatsappCodeButton")),1)],8,kt),N(o,{text:x(n)("or")},null,8,["text"]),P("p",St,I(x(n)("settingsWhatsappCode")),1),P("span",Ct,[x(De)?(S(),D(x(F),{key:0,style:{height:"20px",cursor:"pointer"}})):(S(),D(x(pe),{key:1,onClick:Qs,style:{height:"20px",cursor:"pointer"}})),L(" /authenticate "+I(x(T)),1)]),P("div",{class:"mt-16 pointer change-typo",onClick:l[3]||(l[3]=e=>Le(!0))},[N(x(He),{width:"20",height:"20",class:"mr-8"}),P("p",Pt,I(x(n)("settingsWhatsappChange")),1)])])):(S(),C("div",ht,[P("p",yt,I(x(n)("settingsWhatsappInfo")),1),x(ve)?(S(),C("div",bt,[N(r,{class:"mt-16",styleClasses:"tel-input-wrapper",inputOptions:{styleClasses:"tel-input",placeholder:x(n)("settingsWhatsappConnectPlaceholder"),type:"tel"},modelValue:x(Pe),"onUpdate:modelValue":l[2]||(l[2]=e=>R(Pe)?Pe.value=e:null),validCharactersOnly:!0,mode:"international",invalidMsg:"Invalid phone number",onValidate:Hs},null,8,["inputOptions","modelValue"]),N(x(F),{onClick:Gs,class:"pointer",style:{position:"absolute",height:"20px",top:"13px",right:"13px",filter:"invert(var(--invert-degree))"}})])):(S(),C("button",{key:0,class:"button-green mt-16",onClick:Le},I(x(n)("settingsWhatsappConnect")),1))]))]))])]),x(f)?j("",!0):(S(),C("div",Dt,[P("h2",Tt,I(x(n)("settingsUsefulLinks")),1),P("div",null,[P("p",It,I(x(n)("settingsReachOut")),1),P("a",{href:"https://www.codeway.co",target:"_blank",class:"mt-24",onClick:l[5]||(l[5]=e=>x(w)({eventName:"about_codeway_tapped",properties:{source:"Settings"}}))},[N(x(Ee),{class:"icon"}),P("p",null,I(x(n)("settingsAboutCodeway")),1)])]),P("div",null,[P("p",jt,I(x(n)("settingsPoliciesAndGuidline")),1),P("div",Et,[P("a",{href:"/policies/privacy-en.html",target:"_blank",onClick:l[6]||(l[6]=e=>x(w)({eventName:"privacy_policy_tapped",properties:{source:"Settings"}}))},[N(x(Ue),{class:"icon"}),P("p",null,I(x(n)("settingsPrivacyPolicy")),1)]),P("a",{href:"/policies/terms-conditions-en.html",target:"_blank",onClick:l[7]||(l[7]=e=>x(w)({eventName:"terms_tapped",properties:{source:"Settings"}}))},[N(x(qe),{class:"icon"}),P("p",null,I(x(n)("settingsTermsOfService")),1)]),P("a",{href:"/policies/community-guidelines-en.html",target:"_blank",onClick:l[8]||(l[8]=e=>x(w)({eventName:"community_guidelines_tapped",properties:{source:"Settings"}}))},[N(x(ze),{class:"icon"}),P("p",null,I(x(n)("settingsCommunityGuidelines")),1)])])])])),x(f)?(S(),C("div",$t,[P("h2",Ut,I(x(n)("settingsSupportLinks")),1),P("p",Wt,I(x(n)("settingsDoYouHaveAProblem")),1),P("a",{href:`mailto:askaiweb@codeway.co?subject=Web Support - Ask AI Web - ${x(T)}/${x(H)()}`,onClick:l[9]||(l[9]=e=>x(w)({eventName:"support_tapped",properties:{source:"Settings"}}))},[N(x(ue),{class:"icon"}),P("p",null,I(x(n)("settingsEmailSupport")),1)],8,qt)])):j("",!0)]),P("div",Vt,[P("div",zt,[P("h2",Ot,I(x(n)("settingsSubscriptionManage")),1),x(f)?(S(),C("div",Rt,[P("div",Ft,[P("h3",Lt,I(x(n)("settingsSubscriptionPlan")),1),P("div",Ht,[L(I(Js(x(_)))+" ",1),"web"===x(_).subscriptionPlatform&&"paddle"!==x(_).paymentProcessor?(S(),C("button",{key:0,class:"btn btn-change-plan",disabled:"creatingPortal"===x(u),onClick:l[10]||(l[10]=()=>{x(w)({eventName:"change_your_plan_tapped",properties:{source:"Settings"}}),Zs("paddle"===x(_).paymentProcessor)})},I(x(n)("settingsSubscriptionChangePlan")),9,Gt)):j("",!0)]),l[34]||(l[34]=P("span",{class:"divider mt-36"},null,-1)),"web"===x(_).subscriptionPlatform&&"paddle"!==x(_).paymentProcessor?(S(),C("button",{key:0,class:"pt-16 semi-bold underline pointer mt-32 btn-simple",disabled:"creatingPortal"===x(u),onClick:l[11]||(l[11]=()=>{x(w)({eventName:"change_payment_method_tapped",properties:{source:"Settings"}}),Zs("paddle"===x(_).paymentProcessor)})},I(x(n)("settingsSubscriptionChangePaymentMethod")),9,Qt)):j("",!0),P("button",{class:W("pt-16 semi-bold underline mt-24 btn-simple "+("web"!==x(_).subscriptionPlatform||"paddle"===x(_).paymentProcessor?"":"pointer")),disabled:"creatingPortal"===x(u),onClick:l[12]||(l[12]=()=>{x(w)({eventName:"plan_details_tapped",properties:{source:"Settings"}}),Zs("paddle"===x(_).paymentProcessor)})},I(x(n)("settingsSubscriptionDetails")),11,Jt),"web"!==x(_).subscriptionPlatform||"paddle"===x(_).paymentProcessor?(S(),C("span",Yt,[x(_).isAutoRenewOn||x(_).is_renewal?(S(),C("p",Kt,I(x(n)("settingsSubscriptionRenewalDate"))+" "+I(new Date(x(_).expiresAt||x(_).expires_at||Number(x(_).expiryTimeMillis)).toLocaleString()),1)):(S(),C("p",Zt,I(x(n)("settingsSubscriptionCancelDate"))+" "+I(new Date(x(_).expiresAt||x(_).expires_at||Number(x(_).expiryTimeMillis)).toLocaleString()),1))])):j("",!0)]),"web"===x(_).subscriptionPlatform?(S(),C("button",{key:0,class:"pt-16 bold underline op-50 pointer mt-50 btn-simple btn-stop-cancel",onClick:l[13]||(l[13]=e=>(async(e,t)=>{if("paddle"===e.paymentProcessor){if(u.value="busy",e.isAutoRenewOn){if(w({eventName:"cancel_subscription_tapped",properties:{source:"Settings"}}),p.value){const e=await Paddle.Retain.initCancellationFlow({subscriptionId:t});if(console.log("retain cencllation flow result",e),"retianed"===e.status||"aborted"===e.status)return u.value="idle",w({eventName:"retain_cancellation_flow_success",properties:{status:e.status}}),void console.log("should return");"error"===e.status&&w({eventName:"retain_cancellation_flow_error",properties:{error:e.details}}),"chose_to_cancel"===e.status&&w({eventName:"retain_cancellation_flow_success",properties:{status:e.status}})}console.log("started cancellation"),await Ys(e.subscriptionId)}else w({eventName:"stop_cancelation_tapped",properties:{source:"Settings"}}),await Ks(e.subscriptionId);u.value="idle"}else w({eventName:"cancel_subscription_tapped",properties:{source:"Settings"}}),Zs()})(x(_))),disabled:"creatingPortal"===x(u)||"busy"===x(u)},I("paddle"!==x(_).paymentProcessor||x(_).isAutoRenewOn?x(_).isAutoRenewOn?x(n)("settingsSubscriptionCancel"):x(n)("settingsSubscriptionRenewPlan"):x(n)("settingsSubscriptionUndoCancel")),9,Xt)):j("",!0),P("p",es,I(x(n)("settingsSubscriptionReachUs")),1),P("a",{href:"/policies/refund-en.html",target:"_blank",class:"pt-16 bold underline pointer refund-policy",onClick:l[14]||(l[14]=e=>x(w)({eventName:"refund_policy_tapped",properties:{source:"Settings"}}))},I(x(n)("settingsRefundPolicy")),1)])):(S(),C("div",Bt,[N(c)]))]),x(f)?j("",!0):(S(),C("div",ts,[P("h2",ss,I(x(n)("settingsSupportLinks")),1),P("p",as,I(x(n)("settingsDoYouHaveAProblem")),1),P("a",{href:`mailto:askaiweb@codeway.co?subject=Web Support - Ask AI Web - ${x(T)}/${x(H)()}`,onClick:l[15]||(l[15]=e=>x(w)({eventName:"support_tapped",properties:{source:"Settings"}}))},[N(x(ue),{class:"icon"}),P("p",null,I(x(n)("settingsEmailSupport")),1)],8,ls)])),x(f)?(S(),C("div",ns,[P("h2",is,I(x(n)("settingsUsefulLinks")),1),P("div",null,[P("p",rs,I(x(n)("settingsReachOut")),1),P("a",{href:"https://www.codeway.co",target:"_blank",class:"mt-24",onClick:l[16]||(l[16]=e=>x(w)({eventName:"about_codeway_tapped",properties:{source:"Settings"}}))},[N(x(Ee),{class:"icon"}),P("p",null,I(x(n)("settingsAboutCodeway")),1)])]),P("div",null,[P("p",os,I(x(n)("settingsPoliciesAndGuidline")),1),P("div",cs,[P("a",{href:"/policies/privacy-en.html",target:"_blank",onClick:l[17]||(l[17]=e=>x(w)({eventName:"privacy_policy_tapped",properties:{source:"Settings"}}))},[N(x(Ue),{class:"icon"}),P("p",null,I(x(n)("settingsPrivacyPolicy")),1)]),P("a",{href:"/policies/terms-conditions-en.html",target:"_blank",onClick:l[18]||(l[18]=e=>x(w)({eventName:"terms_tapped",properties:{source:"Settings"}}))},[N(x(qe),{class:"icon"}),P("p",null,I(x(n)("settingsTermsOfService")),1)]),P("a",{href:"/policies/community-guidelines-en.html",target:"_blank",onClick:l[19]||(l[19]=e=>x(w)({eventName:"community_guidelines_tapped",properties:{source:"Settings"}}))},[N(x(ze),{class:"icon"}),P("p",null,I(x(n)("settingsCommunityGuidelines")),1)])])])])):j("",!0)])]),P("div",us,[P("div",ps,[l[35]||(l[35]=P("h2",{class:"pt-28 bold mb-6"}," FAQ ",-1)),N(d,{settings:!0})])])])]),N(m,{modelValue:x(ie),"onUpdate:modelValue":l[24]||(l[24]=e=>R(ie)?ie.value=e:null),grayMode:!0,fullView:!0,centerChatArea:!0},{default:$((()=>[P("div",ds,[P("p",ms,I(x(n)("settingsModalPasswordChange")),1),P("div",vs,[P("p",gs,I(x(n)("settingsModalPasswordCurrent")),1),x(we)?(S(),C("p",hs,I(x(we)),1)):j("",!0)]),P("div",ys,[G(P("input",{class:"form-control mt-10",type:x(je),placeholder:x(n)("settingsModalPasswordCurrentPlaceholder"),name:"passwordExistingChange","onUpdate:modelValue":l[20]||(l[20]=e=>R(ye)?ye.value=e:null)},null,8,bs),[[Q,x(ye)]]),P("div",fs,[P("span",{onClick:Ve},[x($e)?(S(),D(x(Be),{key:0})):(S(),D(x(Fe),{key:1}))])])]),P("div",ws,[P("p",_s,I(x(n)("settingsModalPasswordNew")),1),x(_e)?(S(),C("p",ks,I(x(_e)),1)):j("",!0)]),P("div",Ss,[G(P("input",{class:"form-control mt-10",type:x(je),placeholder:x(n)("settingsModalPasswordNewPlaceholder"),name:"passwordNew","onUpdate:modelValue":l[21]||(l[21]=e=>R(be)?be.value=e:null)},null,8,Cs),[[Q,x(be)]]),P("div",Ps,[P("span",{onClick:Ve},[x($e)?(S(),D(x(Be),{key:0})):(S(),D(x(Fe),{key:1}))])])]),P("p",Ns,I(x(n)("settingsModalPasswordNewConfirm")),1),P("div",xs,[G(P("input",{class:"form-control mt-10",type:x(je),placeholder:x(n)("settingsModalPasswordNewPlaceholder"),name:"passwordNewConfirm","onUpdate:modelValue":l[22]||(l[22]=e=>R(fe)?fe.value=e:null)},null,8,As),[[Q,x(fe)]]),P("div",Ms,[P("span",{onClick:Ve},[x($e)?(S(),D(x(Be),{key:0})):(S(),D(x(Fe),{key:1}))])])]),P("div",Ds,[P("button",{class:"btn btn-cancel mr-20",onClick:l[23]||(l[23]=()=>{x(w)({eventName:"change_password_canceled",properties:{source:"Settings"}}),Oe(!1)})},I(x(n)("settingsModalCancel")),1),P("button",{class:"btn btn-save",onClick:zs,disabled:x(Se)},I(x(n)("settingsModalSave")),9,Ts)])])])),_:1},8,["modelValue"]),N(m,{modelValue:x(me),"onUpdate:modelValue":l[27]||(l[27]=e=>R(me)?me.value=e:null),grayMode:!0,centerChatArea:!0},{default:$((()=>[P("div",Is,[P("p",js,[L(I(x(n)("settingsModalDeleteAccountQuestion1"))+" ",1),l[36]||(l[36]=P("br",null,null,-1)),L(" "+I(x(n)("settingsModalDeleteAccountQuestion2")),1)]),P("p",Es,I(x(n)("settingsModalDeleteAccountWarning")),1),"password"===x(k)?(S(),C("div",$s,[G(P("input",{class:"form-control mt-20",type:x(je),placeholder:x(n)("settingsModalPasswordPlaceholder"),"onUpdate:modelValue":l[25]||(l[25]=e=>R(he)?he.value=e:null)},null,8,Us),[[Q,x(he)]]),P("div",{class:"eyeButton",onClick:Ve},[x($e)?(S(),D(x(Be),{key:0})):(S(),D(x(Fe),{key:1}))])])):j("",!0),x(we)?(S(),C("p",Ws,I(x(we)),1)):j("",!0),P("div",qs,[P("button",{class:"btn btn-delete mr-20",onClick:Os,disabled:x(Ce)},I(x(n)("settingsModalDeleteAccount")),9,Vs),P("button",{class:"btn btn-cancel",onClick:l[26]||(l[26]=()=>{x(w)({eventName:"delete_account_canceled",properties:{source:"Settings",signupMethod:x(k)}}),Re(!1)})},I(x(n)("settingsModalCancel")),1)])])])),_:1},8,["modelValue"]),N(m,{modelValue:x(ge),"onUpdate:modelValue":l[28]||(l[28]=e=>R(ge)?ge.value=e:null),onBeforeClose:Xs,grayMode:!0,fullView:!0,onboarding:!0,checkout:!0},{default:$((()=>[N(v,{onCloseCheckout:Xs,popup:!0})])),_:1},8,["modelValue"]),N(m,{modelValue:x(ea),"onUpdate:modelValue":l[29]||(l[29]=e=>R(ea)?ea.value=e:null),onBeforeClose:ta,fullView:!0,darkMode:!0},{default:$((()=>[N(g,{onClose:ta})])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-a07bd4f5"]]);export{zs as default};
